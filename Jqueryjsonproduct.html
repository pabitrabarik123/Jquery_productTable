<!DOCTYPE html >
<html>
<head>
  <title>Products Table Using jQuery</title>

  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

  <style>
    body { font-family: Arial; }

    table { border-collapse: collapse; width: 100%; font-size:14px; }
    th, td { border: 1px solid #000; padding: 6px; text-align:center; }
    img.thumb { width: 60px; }

    input{ margin:10px 0; padding:6px; width:220px; }


     #pagination button{
      padding:6px 10px;
      margin:2px;
      cursor:pointer;
      border-radius:6px;
      margin-top:20px;
      border:1px solid #ccc;
      border:none;
      border-right:none;
  
    }
    .active-page{
      background: #3a4452;
      color:white;
      
    } 
    #pagination{
      display:flex;
      justify-content:center;  
      align-items:center;
                 
    }
    .modal{
      display:none;
      position:fixed;
      top:0; left:0;
      width:100%; height:100%;
      background:rgba(0,0,0,0.5);
    }

    #details img{
      display:block;
      margin:15px auto;
    }

    .modal-content{
      background:#fff;
      width:550px;
      margin:60px auto;
      padding:15px;
      border-radius:10px;
      max-height:80%;
      overflow-y:auto;
    }

    .close{
      float:right;
      cursor:pointer;
      font-size:20px;
    }

    .modal-open{
      overflow:hidden;
    }
  </style>
</head>

<body>

<h2>Product Table</h2>

<div id="searchBox">
  <input type="text" id="searchInput" placeholder="Search products…">
</div>


<table id="productTable">
  <tr>
    <th>ID</th>
    <th>Image</th>
    <th>Title</th>
    <th>Description</th>
    <th>Category</th>
    <th>Price</th>
    <th>Discount %</th>
    <th>Rating</th>
    <th>Stock</th>
    <th>Brand</th>
    <th>SKU</th>
    <th>Weight</th>
    <th>Warranty</th>
    <th>Shipping</th>
    <th>Status</th>
    <th>Return Policy</th>
    <th>Min Qty</th>
    <th>Action</th>
  </tr>
</table>

<div id="pagination"></div>


<div id="modal" class="modal">
  <div class="modal-content">
    <span class="close">✖</span>
    <div id="details"></div>
  </div>
</div>


<script>
let products = [];
let currentPage = 1;
const pageSize = 5;
let filteredProducts = []; 



$.getJSON("https://dummyjson.com/products", function(data){
  products = data.products;
  filteredProducts = products;

  renderTable();
  renderPagination();
  toggleSearch();  
});



function renderTable(){

  const start = (currentPage - 1) * pageSize;
  const end = start + pageSize;

  const pageItems = filteredProducts.slice(start, end);

  const $table = $("#productTable");
  $table.find("tr:gt(0)").remove();

  $.each(pageItems, function(_, p){
    $table.append(`
      <tr>
        <td>${p.id}</td>
        <td><img class="thumb" src="${p.thumbnail}"></td>
        <td>${p.title}</td>
        <td>${p.description}</td>
        <td>${p.category}</td>
        <td>$${p.price}</td>
        <td>${p.discountPercentage}%</td>
        <td>${p.rating}</td>
        <td>${p.stock}</td>
        <td>${p.brand || "-"}</td>
        <td>${p.sku || "-"}</td>
        <td>${p.weight || "-"}</td>
        <td>${p.warrantyInformation || "-"}</td>
        <td>${p.shippingInformation || "-"}</td>
        <td>${p.availabilityStatus || "-"}</td>
        <td>${p.returnPolicy || "-"}</td>
        <td>${p.minimumOrderQuantity || "-"}</td>
        <td><button class="show" data-id="${p.id}">Show Details</button></td>
      </tr>
    `);
  });
}



function renderPagination(){

  const pageCount = Math.ceil(filteredProducts.length / pageSize);
  let buttons = "";

  for(let i = 1; i <= pageCount; i++){
    buttons += `<button class="page-btn ${i===currentPage?'active-page':''}" data-page="${i}">${i}</button>`;
  }

  $("#pagination").html(buttons);
}



$(document).on("click", ".page-btn", function(){
  currentPage = $(this).data("page");
  renderTable();
  renderPagination();
  toggleSearch();
});



$("#searchInput").on("keyup", function(){

  const q = $(this).val().toLowerCase();

  filteredProducts = products.filter(p =>
    p.title.toLowerCase().includes(q) ||
    p.category.toLowerCase().includes(q) ||
    (p.brand && p.brand.toLowerCase().includes(q))
  );

  currentPage = 1;

  renderTable();
  renderPagination();
  toggleSearch();
});



$(document).on("click", ".show", function(){
  const id = $(this).data("id");
  const p = products.find(x => x.id === id);

  $("#details").html(`
    <h2>${p.title}</h2>
    <img src="${p.thumbnail}" width="140"><br><br>

    <p><b>Description:</b> ${p.description}</p>
    <p><b>Category:</b> ${p.category}</p>
    <p><b>Price:</b> $${p.price}</p>
    <p><b>Rating:</b> ${p.rating}</p>
    <p><b>Stock:</b> ${p.stock}</p>
    <p><b>Brand:</b> ${p.brand || "-"}</p>
    <p><b>SKU:</b> ${p.sku || "-"}</p>
    <p><b>Weight:</b> ${p.weight || "-"}</p>

    <p><b>Dimensions:</b>
      ${(p.dimensions?.width || "-")} ×
      ${(p.dimensions?.height || "-")} ×
      ${(p.dimensions?.depth || "-")}
    </p>

    <p><b>Warranty:</b> ${p.warrantyInformation || "-"}</p>
    <p><b>Shipping:</b> ${p.shippingInformation || "-"}</p>
    <p><b>Status:</b> ${p.availabilityStatus || "-"}</p>
    <p><b>Return Policy:</b> ${p.returnPolicy || "-"}</p>
    <p><b>Minimum Order Qty:</b> ${p.minimumOrderQuantity || "-"}</p>

    <h4>Tags</h4>
    <p>${(p.tags || []).join(", ")}</p>

    <h4>Reviews</h4>
    ${(p.reviews || []).map(r => `
      <p>
        ⭐ ${r.rating}<br>
        <b>Comment:</b> ${r.comment}<br>
        <small>
          <b>Name:</b> ${r.reviewerName}<br>
          <b>Email:</b> ${r.reviewerEmail}<br>
          <b>Date:</b> ${new Date(r.date).toLocaleDateString()}
        </small>
      </p>
    `).join("")}

    <h4>Meta Info</h4>
    <p><b>Created:</b> ${p.meta?.createdAt || "-"}</p>
    <p><b>Updated:</b> ${p.meta?.updatedAt || "-"}</p>
    <p><b>Barcode:</b> ${p.meta?.barcode || "-"}</p>
    ${p.meta?.qrCode ? `<img src="${p.meta.qrCode}" width="100">` : ""}
  `);

  $("#modal").show();
  $("html").addClass("modal-open");
});



$(".close, #modal").on("click", function(e){
  if(e.target !== this) return;
  $("#modal").hide();
  $("html").removeClass("modal-open");
});




function toggleSearch() {
  if(currentPage === 1){
    $("#searchBox").show();
  } else {
    $("#searchBox").hide();
  }
}

</script>

</body>
</html>
 

 
